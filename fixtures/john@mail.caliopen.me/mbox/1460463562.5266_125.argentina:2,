Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1aXiWg-00079X-TA
	for mharc-john@mail.caliopen.me; Sun, 21 Feb 2016 23:55:14 -0500
Received: from eggs.gnu.org ([2001:4830:134:3::10]:59635)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <clement.pit@gmail.com>) id 1aXiWe-000793-6d
	for john@mail.caliopen.me; Sun, 21 Feb 2016 23:55:12 -0500
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <clement.pit@gmail.com>) id 1aXiWb-0002XB-0n
	for john@mail.caliopen.me; Sun, 21 Feb 2016 23:55:12 -0500
Received: from mout.kundenserver.de ([212.227.126.187]:64920)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <clement.pit@gmail.com>) id 1aXiWa-0002Wm-NY
	for john@mail.caliopen.me; Sun, 21 Feb 2016 23:55:08 -0500
Received: from [18.189.69.235] ([18.189.69.235]) by mrelayeu.kundenserver.de
	(mreue001) with ESMTPSA (Nemesis) id 0LoMna-1a01bM0q7O-00gUGc for
	<emacs-devel@gnu.org>; Mon, 22 Feb 2016 05:55:06 +0100
To: Emacs developers <emacs-devel@gnu.org>
From: =?UTF-8?Q?Cl=c3=a9ment_Pit--Claudel?= <clement.pit@gmail.com>
Subject: What to do when font-lock-flush + font-lock-ensure do less than
	font-lock-fontify-buffer?
Message-ID: <56CA94A8.3000205@gmail.com>
Date: Sun, 21 Feb 2016 23:55:04 -0500
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
	Thunderbird/38.5.1
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="tfbfkeDuDe1K0SQceavFGnFRqqNnLCUVm"
X-Provags-ID: V03:K0:Yi0s2G0QCWwvqfmrRoR3NnPDz+/ZfeeJ4vk+byc4BAtbJ15edYk
	O+xRzNJ45iDHGKGTxaT6tGXJ0mdojQBvPsfu6RjSgKcW8a5IzH2XrpAaQ9h6nIIjaTilcTR
	haNVdXOE+aFgicaLBM7fJ8VPeBh84biCECwMUJsLsffiqjXiPJkTfxDF7r43UE9AajmJqVN
	FQufpjIkkMu9g9MrJ4tbQ==
X-UI-Out-Filterresults: notjunk:1;V01:K0:hyaBvFb5Sek=:yussE9yHnt/NKFGXQdnHTu
	1x9Os8BLbGFWOaMmpYu/EF9L+51oxE2GcelbOJZkIQt5gCmq/6y0jYjBjcH2pkv5W8NNPv1VV
	RizWGK1Eu01eECtOvPp9PtZQh+PxAcThPuIgM8EEcXINLoZll4HlmbSUMZ7lNxMyQxFP4egsB
	JDPgJ4H+pLdp8UqeR2YxMf34d3tVwqHyN3ygRVFNuvubojyuqnpaVXrNGioWfmHWKxlq7YhRh
	vSB1l9wlDeBUoiNSCRISIR7kjjGjrr4YHMcEQWsw32AcReHTYQ9JIjItjrNBY5BoIsd31dgmd
	bpp526mmqlvkUa0bhZNlreqxLVXOhwJ0CIS8bkf6tdj5HFwdc8hBQ9KzyvEzETEeuj13iFJoI
	KJ0oHiSSeCgUDQMmpojmvLLc+uGpHjduEhP+jHvZKfQkFr08SRLgbAZP1cUlO3Im1qjNY4Idp
	mj40bxHlbRkXWlYGWL5za+y6+cARehrl54BR+tmFzlbPxOr7dQimo6D5fTEi7/ASuy6l3kL3E
	+h3XZ/HVlU0xBkMRI1vNe33rmMP4UhAn5ybOBO38obTe+wGdbOZqTOiVZFgueHuCuTd4JgktS
	iI4v0ZAP6EYvBFsP9b+56ymUtlr1cUQxf4mnUsjU40l99xtMMojznqbjhhx5e+ZzKTg4FauML
	KshyEYVdadhkQj7BjX2hLT1h1A3dg8OhPqY7mQvTDSCYEEByh3UL/rYooImRELHZlb+E=
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.2.x-3.x [generic]
X-Received-From: 212.227.126.187
X-BeenThere: emacs-devel@gnu.org
X-Mailman-Version: 2.1.14
Precedence: list
List-Id: "Emacs development discussions." <emacs-devel.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/emacs-devel>,
	<mailto:emacs-devel-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/emacs-devel>
List-Post: <mailto:emacs-devel@gnu.org>
List-Help: <mailto:emacs-devel-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/emacs-devel>,
	<mailto:emacs-devel-request@gnu.org?subject=subscribe>
X-List-Received-Date: Mon, 22 Feb 2016 04:55:13 -0000
Content-Length: 1910
Lines: 48

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--tfbfkeDuDe1K0SQceavFGnFRqqNnLCUVm
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi emacs-devel,

IIUC the proper way in Emacs 25 to signal changes that require a refontif=
ication to font-lock is to call font-lock-flush. This doesn't always do a=
s much as font-lock-fontify-buffer does, though.

In particular, when the font-lock-fontified variable is nil (which does h=
appen, though I don't know why; I don't know what this variable is for), =
then calling font-lock-fontify buffer does refontify the whole buffer, bu=
t font-lock-flush and font-lock-ensure don't seem to do anything.

What's the proper way to mark a buffer for refontification (and refontify=
 the visible portion) immediately in 25?

Thanks,
Cl=C3=A9ment.


--tfbfkeDuDe1K0SQceavFGnFRqqNnLCUVm
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (GNU/Linux)

iQIcBAEBAgAGBQJWypSoAAoJEPqg+cTm90wj+ToP/37g94nUQ/6UAZtcNMQ0hThg
48ZlQrnx3icl05P9kOZK1OT/fqE5g//W2957JEIay+ISJtjgCTwW2ps4StTFLppc
A/HiJ9YCLZAHwjnyXd4fiAj4r/qbYBaToXbHa7dX0lci/Q87km0jt+Ca3FIMbSmV
WyKL69FfF+uM5ZNEEyiCvbHf7xB3EaRlLzHJPFtkvvkfV+iydgSeNzuBFsjNp0fZ
p69LdsBDQbl1Lbgoa6sKEPX7ihDeiUBB+buUtqtRDAR9YLIxuD4ClxLrJh0SeI9S
N7mnKP3Zdhyd4Cz4cw4y2Zgmqv7ykHUZnH+PR+k6NxovguyR9/uTB+enhqAsEMTw
McBqYmJrkKVvF/nqzR6hsej0M6rxNTXpDrH8YaZS6xuRJZT4CxUx6wNzw/wl1rp4
CwuPBk0RCK9PixVLdWIn6PxvzhTNFK39riWYr0RtQUdpDRFudKUG2q4DGrcFXxLd
Zqd14P9ah1gxs+B3SqbXH8xk15ib8ePoMAkf19oOJykklYV71kWhtMaQL5h6jGWC
CpICn0ynnIEYpAm2VP9lL14jcMIlHJyxL+dlsb2CMc6neWxZEFXBtcVgga0e+pDd
GOnzKWG0gmJ/+SDy8YlIXj6K6WYxEmAICvTMEdEIRG3FvRoJ1AzC5uEpyn1eVcBw
DjGVhlrsZ7SpfJKIZjRp
=rQEZ
-----END PGP SIGNATURE-----

--tfbfkeDuDe1K0SQceavFGnFRqqNnLCUVm--

